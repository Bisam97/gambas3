' Gambas class file

Export
Inherits DBusVariant

Public Const Signature As String = "a(iiay)"

Public Sub _new(hPict As Picture)

  Dim hImage As Image
  
  If Not hPict Then
    hImage = Image.Load("default.png")
  Else
    hImage = hPict.Image
  Endif
  
  hImage.Format = "ARGB"
  
  Me.Value = [[hImage.W, hImage.H, Byte[].FromString(String@(hImage.Data, hImage.W * hImage.H * SizeOf(gb.Integer)))]]
  
End

