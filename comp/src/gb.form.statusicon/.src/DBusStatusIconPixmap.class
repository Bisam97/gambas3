' Gambas class file

Export
Inherits DBusVariant

Public Const Signature As String = "a(iiay)"

Public Sub _new(hPict As Picture)

  Dim hImage As Image
  Dim sData As String
  
  If Not hPict Then
    hImage = Image.Load("default.png")
  Else
    hImage = hPict.Image
  Endif
  
  hImage.Format = "ARGB"
  
  sData = String@(hImage.Data, hImage.W * hImage.H * SizeOf(gb.Integer))
  Me.Value = [[hImage.W, hImage.H, Byte[].FromString(sData)]]
  'System._Breakpoint
  
End

